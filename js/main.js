var themeColorMeta,pageHeaderEl,navMusicEl,consoleEl,anzhiyu_musicFirst=!1,anzhiyu_keyboard=null,anzhiyu_musicPlaying=!1,$bodyWrap=document.getElementById("body-wrap"),anzhiyu_intype=!1,anzhiyu_keyUpEvent_timeoutId=null,anzhiyu_keyUpShiftDelayEvent_timeoutId=null,rm=null,popupWindowTimer=null,adjectives=["美丽的","英俊的","聪明的","勇敢的","可爱的","慷慨的","善良的","可靠的","开朗的","成熟的","稳重的","真诚的","幽默的","豁达的","有趣的","活泼的","优雅的","敏捷的","温柔的","温暖的","敬业的","细心的","耐心的","深沉的","朴素的","含蓄的","率直的","开放的","务实的","坚强的","自信的","谦虚的","文静的","深刻的","纯真的","朝气蓬勃的","慎重的","大方的","顽强的","迷人的","机智的","善解人意的","富有想象力的","有魅力的","独立的","好奇的","干净的","宽容的","尊重他人的","体贴的","守信的","有耐性的","有责任心的","有担当的","有远见的","有智慧的","有眼光的","有冒险精神的","有爱心的","有同情心的","喜欢思考的","喜欢学习的","具有批判性思维的","善于表达的","善于沟通的","善于合作的","善于领导的","有激情的","有幽默感的","有思想的","有个性的","有正义感的","有责任感的","有创造力的","有想象力的","有艺术细胞的","有团队精神的","有协调能力的","有决策能力的","有组织能力的","有学习能力的","有执行能力的","有分析能力的","有逻辑思维的","有创新能力的","有专业素养的","有商业头脑的"],vegetablesAndFruits=["萝卜","白菜","芹菜","生菜","青椒","辣椒","茄子","豆角","黄瓜","西红柿","洋葱","大蒜","土豆","南瓜","豆腐","韭菜","花菜","西兰花","蘑菇","金针菇","苹果","香蕉","橙子","柠檬","猕猴桃","草莓","葡萄","桃子","杏子","李子","石榴","西瓜","哈密瓜","蜜瓜","樱桃","蓝莓","柿子","橄榄","柚子","火龙果"],selectRandomSong=[],musicVolume=.8,changeMusicListFlag=!1,defaultPlayMusicList=[];document.addEventListener("DOMContentLoaded",(function(){let e,t,n,o=!1,i=n=>{var o=e=>Array.from(e).reduce(((e,t)=>e+t.offsetWidth),0);n&&(n=o(document.querySelector("#blog_name > a").children),o=o(document.getElementById("menus").children),e=n+o,t=document.getElementById("nav")),n=window.innerWidth<=768||e>t.offsetWidth-120;t.classList.toggle("hide-menu",n)},a=()=>{anzhiyu.sidebarPaddingR(),anzhiyu.animateIn(document.getElementById("menu-mask"),"to_show 0.5s"),document.getElementById("sidebar-menus").classList.add("open"),o=!0},l=()=>{document.body.style.paddingRight="",anzhiyu.animateOut(document.getElementById("menu-mask"),"to_hide 0.5s"),document.getElementById("sidebar-menus").classList.remove("open"),o=!1};function r(){let e=document.getElementById("rightside"),t=window.innerHeight+56,n=0,o=(document.body.scrollHeight<=t&&(e.style.cssText="opacity: 1; transform: translateX(-58px)"),0),i=!0,a=document.getElementById("page-header"),l=document.getElementById("popup-window"),r="function"==typeof chatBtnHide,s="function"==typeof chatBtnShow,d=!1,c=document.getElementById("nav-music"),u=document.getElementById("footer"),m=document.getElementById("waterfall"),y=document.getElementById("percent"),h=document.getElementById("nav-totop"),g=document.getElementById("body-wrap"),p=document.getElementById("post-comment")||document.getElementById("footer");var L=anzhiyu.throttle((()=>{var c=window.scrollY||document.documentElement.scrollTop,u=(L=(u=c)>o,o=u,L),L=Math.abs(n-c);60<c&&L<20&&0!=L||(l&&l.classList.contains("show-popup-window")&&60<c&&20<L&&0!=n&&anzhiyu.throttle((()=>{popupWindowTimer&&clearTimeout(popupWindowTimer),popupWindowTimer=setTimeout((()=>{l.classList.contains("popup-hide")||l.classList.add("popup-hide"),setTimeout((()=>{l.classList.remove("popup-hide"),l.classList.remove("show-popup-window")}),1e3)}),1e3)}),1e3)(),26<(n=c)?(u?(a.classList.contains("nav-visible")&&a.classList.remove("nav-visible"),s&&!0===i&&(chatBtnHide(),i=!1)):(a.classList.contains("nav-visible")||a.classList.add("nav-visible"),r&&!1===i&&(chatBtnShow(),i=!0)),requestAnimationFrame((()=>{anzhiyu.initThemeColor(),a.classList.add("nav-fixed")})),"0"===window.getComputedStyle(e).getPropertyValue("opacity")&&(e.style.cssText="opacity: 0.8; transform: translateX(-58px)")):(c<=5&&requestAnimationFrame((()=>{a.classList.remove("nav-fixed"),a.classList.remove("nav-visible"),anzhiyu.initThemeColor()})),e.style.cssText="opacity: ''; transform: ''"),document.body.scrollHeight<=t&&(e.style.cssText="opacity: 0.8; transform: translateX(-58px)"),function(e){var t,n=g.clientHeight;n=(t=document.documentElement.clientHeight)<n?n-t:document.documentElement.scrollHeight-t,n=100<(t=Math.round(e/n*100))?100:t<=0?1:t,y.textContent=n,(e=>{if(e){var t=window.getComputedStyle(e).getPropertyValue("display");if("none"!=t)return t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e.offsetTop-document.documentElement.scrollTop<=t}})(p||90<n)&&20<e?(h.classList.add("long"),y.textContent="返回顶部"):(h.classList.remove("long"),y.textContent=n),m&&(t=e%document.documentElement.clientHeight,!d&&100+t>=document.documentElement.clientHeight?(console.info(t,document.documentElement.clientHeight),setTimeout((()=>{waterfall("#waterfall")}),500)):setTimeout((()=>{m&&waterfall("#waterfall")}),500))}(c))}),96);u&&anzhiyu.intersectionObserver((()=>{u&&c&&768<document.body.clientWidth&&(c.style.bottom="-10px",c.style.opacity="0"),d=!0}),(()=>{u&&c&&768<document.body.clientWidth&&(c.style.bottom="20px",c.style.opacity="1")}))().observe(u),L(),anzhiyu.addEventListenerPjax(window,"scroll",L,{passive:!0})}function s(e){e.forEach((e=>{var t=e.getAttribute("datetime");e.textContent=anzhiyu.diffDate(t,!0),e.style.display="inline"}))}let d=e=>{let t=(window.globalFn||{}).themeChange||{};t&&(Object.keys(t).forEach((n=>{(0,t[n])(e)})),rm&&rm.hideRightMenu(),n.querySelector(".menu-darkmode-text").textContent="light"===e?"深色模式":"浅色模式",GLOBAL_CONFIG_SITE.isPost||(document.querySelector(":root").style.setProperty("--anzhiyu-bar-background","var(--anzhiyu-meta-theme-color)"),requestAnimationFrame((()=>{anzhiyu.initThemeColor()})),document.documentElement.style.setProperty("--anzhiyu-main",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-theme")),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd")))},c={readmode:()=>{let e=document.body,t=(e.classList.add("read-mode"),document.createElement("button")),n=(t.type="button",t.className="anzhiyufont anzhiyu-icon-xmark exit-readmode",e.appendChild(t),()=>{e.classList.remove("read-mode"),t.remove(),t.removeEventListener("click",n)});t.addEventListener("click",n)},darkmode:()=>{var e="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";"dark"==e?(activateDarkMode(),void 0!==GLOBAL_CONFIG.Snackbar&&anzhiyu.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),void 0!==GLOBAL_CONFIG.Snackbar&&anzhiyu.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),saveToLocal.set("theme",e,2),d(e)},"rightside-config":e=>{let t=e.firstElementChild;t.classList.contains("show")&&(t.classList.add("status"),setTimeout((()=>{t.classList.remove("status")}),300)),t.classList.toggle("show")},"go-up":()=>{anzhiyu.scrollToDest(0,500)},"hide-aside-btn":()=>{var e=document.documentElement.classList,t=e.contains("hide-aside")?"show":"hide";saveToLocal.set("aside-status",t,2),e.toggle("hide-aside")},"mobile-toc-button":e=>{let t=document.getElementById("card-toc");t.style.transformOrigin=`right ${e.getBoundingClientRect().top+17}px`,t.style.transition="transform 0.3s ease-in-out",t.classList.toggle("open"),t.addEventListener("transitionend",(()=>{t.style.transition="",t.style.transformOrigin=""}),{once:!0})},"chat-btn":()=>{window.chatBtnFn()},translateLink:()=>{window.translateFn.translatePage()}},u=(document.getElementById("rightside").addEventListener("click",(function(e){(e=e.target.closest("[id]"))&&c[e.id]&&c[e.id](this)})),document.addEventListener("touchstart",(e=>{anzhiyu.removeRewardMask()}),{passive:!0}),()=>{var e=document.querySelectorAll("#article-container .tabs");if(e.length){let t=(e,t)=>{Array.from(e).forEach((e=>{e.classList.remove("active"),e!==t&&e.id!==t||e.classList.add("active")}))};e.forEach((e=>{var n,o,i=!!e.querySelectorAll(".gallery-container");n=i,anzhiyu.addEventListenerPjax(e.firstElementChild,"click",(function(e){var o;(e=e.target.closest("button")).classList.contains("active")||(t(this.children,e),this.classList.remove("no-default"),e=e.getAttribute("data-href"),o=this.nextElementSibling,t(o.children,e),n&&0<(o=o.querySelectorAll(`#${e} .fj-gallery`)).length&&anzhiyu.initJustifiedGallery(o))})),o=e,anzhiyu.addEventListenerPjax(o.lastElementChild,"click",(e=>{e.target.closest("button")&&anzhiyu.scrollToDest(anzhiyu.getEleTop(o),300)}))}))}}),m=e=>/^(rgb|RGB)/.test(e)?e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(",").reduce(((e,t)=>e+Number(t).toString(16).padStart(2,"0")),"#"):/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(e)&&4===e.length?Array.from(e.slice(1)).reduce(((e,t)=>e+t+t),"#"):e,y=(e,t)=>{var n=e.startsWith("#"),o=(e,t)=>255<(e+=t)?255:e<0?0:e,i=o((e=(n&&(e=e.slice(1)),parseInt(e,16)))>>16,t),a=o(e>>8&255,t);o=o(255&e,t);return(n?"#":"")+String("000000"+(o|a<<8|i<<16).toString(16)).slice(-6)},h=e=>{var[,e,t,n]=(e=>(e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,n,o)=>t+t+n+n+o+o)),(e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?`rgb(${parseInt(e[1],16)}, ${parseInt(e[2],16)}, ${parseInt(e[3],16)})`:null))(e).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return.5<=(299*e+587*t+114*n)/255e3?"light":"dark"};function g(e,t){(e=document.getElementById(e))&&t?(t=e.querySelector(t))&&t.addEventListener("click",c.darkmode):e&&e.addEventListener("click",c.darkmode)}if(window.onkeydown=function(e){123===e.keyCode&&anzhiyu.snackbarShow("开发者模式已打开，请遵循GPL协议",!1)},window.refreshFn=function(){var e,n,o,l;if(i(!0),t.classList.add("show"),themeColorMeta=document.querySelector('meta[name="theme-color"]'),pageHeaderEl=document.getElementById("page-header"),navMusicEl=document.getElementById("nav-music"),consoleEl=document.getElementById("console"),g("console",".darkmode_switchbutton"),GLOBAL_CONFIG_SITE.isPost?(void 0!==GLOBAL_CONFIG.noticeOutdate&&(o=GLOBAL_CONFIG.noticeOutdate,(l=anzhiyu.diffDate(GLOBAL_CONFIG_SITE.postUpdate))>=o.limitDay)&&((n=document.createElement("div")).className="post-outdate-notice",n.textContent=o.messagePrev+" "+l+" "+o.messageNext,l=document.getElementById("article-container"),"top"===o.position?l.insertBefore(n,l.firstChild):l.appendChild(n)),GLOBAL_CONFIG.relativeDate.post&&s(document.querySelectorAll("#post-meta time"))):((GLOBAL_CONFIG.relativeDate.homepage||GLOBAL_CONFIG.relativeDate.simplehomepage)&&s(document.querySelectorAll("#recent-posts time")),GLOBAL_CONFIG.runtime&&(o=document.getElementById("runtimeshow"))&&(l=o.getAttribute("data-publishDate"),o.textContent=anzhiyu.diffDate(l)+" "+GLOBAL_CONFIG.runtime),(n=document.getElementById("last-push-date"))&&(e=n.getAttribute("data-lastPushDate"),n.textContent=anzhiyu.diffDate(e,!0)),(e=document.querySelector("#aside-cat-list.expandBtn"))&&anzhiyu.addEventListenerPjax(e,"click",(e=>{var t=e.target;"I"===t.nodeName&&(e.preventDefault(),t.parentNode.classList.toggle("expand"))}),!0)),GLOBAL_CONFIG.diytitle){let E,f=GLOBAL_CONFIG.diytitle.leaveTitle,z=GLOBAL_CONFIG.diytitle.backTitle,b=document.title;document.addEventListener("visibilitychange",(function(){document.hidden?(document.title=f,clearTimeout(E)):(document.title=z+b,E=setTimeout((function(){document.title=b}),2e3))}))}(function(){let e=GLOBAL_CONFIG_SITE.isToc,t=GLOBAL_CONFIG.isAnchor;var n=document.getElementById("article-container");if(n&&(e||t)){let o,i,a,l;if(e){let e=document.getElementById("card-toc");i=e.querySelector(".toc-content"),o=i.querySelectorAll(".toc-link"),l=i.classList.contains("is-expand"),anzhiyu.addEventListenerPjax(i,"click",(t=>{var n=t.target.closest(".toc-link");n&&(t.preventDefault(),anzhiyu.scrollToDest(anzhiyu.getEleTop(document.getElementById(decodeURI(n.getAttribute("href")).replace("#","")))-60,300),window.innerWidth<900)&&e.classList.remove("open")})),a=e=>{e=e.getBoundingClientRect().top;var t=i.scrollTop;e>document.documentElement.clientHeight-100&&(i.scrollTop=t+150),e<100&&(i.scrollTop=t-150)}}n=n.querySelectorAll("h1,h2,h3,h4,h5,h6");let r=Array.from(n).filter((e=>"CrawlerTitle"!==e.id)),s="",d=function(n){if(0===n)return!1;let d="",c="";if(r.forEach((function(e,t){n>anzhiyu.getEleTop(e)-80&&(e=e.id,d=e?"#"+encodeURI(e):"",c=t)})),s!==c&&(t&&anzhiyu.updateAnchor(d),s=c,e)&&(i.querySelectorAll(".active").forEach((e=>{e.classList.remove("active")})),""!==d)){let e=o[c];if(e.classList.add("active"),setTimeout((()=>{a(e)}),0),!l){let t=e.parentNode;for(;!t.matches(".toc");t=t.parentNode)t.matches("li")&&t.classList.add("active")}}};n=anzhiyu.throttle((()=>{var e=window.scrollY||document.documentElement.scrollTop;d(e)}),100),anzhiyu.addEventListenerPjax(window,"scroll",n,{passive:!0})}})(),GLOBAL_CONFIG_SITE.isHome&&(c=document.getElementById("scroll-down"))&&anzhiyu.addEventListenerPjax(c,"click",(()=>{var e=document.getElementById("bbTimeList");e?anzhiyu.scrollToDest(e.offsetTop-62,300):anzhiyu.scrollToDest(document.getElementById("home_top").offsetTop-60,300)}));var d,c=GLOBAL_CONFIG.highlight;if(c){let{highlightCopy:I,highlightLang:C,highlightHeightLimit:B,plugin:O}=c;c=GLOBAL_CONFIG_SITE.isHighlightShrink;let w=I||C||void 0!==c;var p="highlight.js"===O?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]');if((w||B)&&p.length){let G="prismjs"===O,A=!0===c?"closed":"",k=void 0!==c?'<i class="anzhiyufont anzhiyu-icon-angle-down expand ${highlightShrinkClass}"></i>':"",_=I?'<div class="copy-notice"></div><i class="anzhiyufont anzhiyu-icon-paste copy-button"></i>':"",T=(e,t)=>{if(void 0!==GLOBAL_CONFIG.Snackbar)anzhiyu.snackbarShow(t);else{let n=e.previousElementSibling;n.textContent=t,n.style.opacity=1,setTimeout((()=>{n.style.opacity=0}),800)}},S=e=>{document.queryCommandSupported&&document.queryCommandSupported("copy")?(document.execCommand("copy"),T(e,GLOBAL_CONFIG.copy.success)):T(e,GLOBAL_CONFIG.copy.noSupport)},F=e=>{var t=e.parentNode,n=(t.classList.add("copy-true"),window.getSelection()),o=document.createRange(),i=G?"pre code":"table .code pre";o.selectNodeContents(t.querySelectorAll(i)[0]),n.removeAllRanges(),n.addRange(o),S(e.lastChild),n.removeAllRanges(),t.classList.remove("copy-true")},x=e=>{e.classList.toggle("closed")},N=function(e){(e=e.target.classList).contains("expand")?x(this):e.contains("copy-button")&&F(this)},P=function(){this.classList.toggle("expand-done")},q=(e,t,n)=>{var o,i=document.createDocumentFragment();w&&((o=document.createElement("div")).className="highlight-tools "+A,o.innerHTML=k+e+_,anzhiyu.addEventListenerPjax(o,"click",N),i.appendChild(o)),B&&t.offsetHeight>B+30&&((e=document.createElement("div")).className="code-expand-btn",e.innerHTML='<i class="anzhiyufont anzhiyu-icon-angle-double-down"></i>',anzhiyu.addEventListenerPjax(e,"click",P),i.appendChild(e)),"hl"===n?t.insertBefore(i,t.firstChild):t.parentNode.insertBefore(i,t)};G?p.forEach((e=>{var t;C?(t=`<div class="code-lang">${e.getAttribute("data-language")||"Code"}</div>`,anzhiyu.wrap(e,"figure",{class:"highlight"}),q(t,e)):(anzhiyu.wrap(e,"figure",{class:"highlight"}),q("",e))})):p.forEach((e=>{if(C){let n=e.getAttribute("class").split(" ")[1];var t=`<div class="code-lang">${n="plain"!==n&&void 0!==n?n:"Code"}</div>`;q(t,e,"hl")}else q("",e,"hl")}))}}if(GLOBAL_CONFIG.isPhotoFigcaption&&document.querySelectorAll("#article-container img").forEach((function(e){var t,n=e.parentNode,o=e.title||e.alt;o&&!n.parentNode.classList.contains("justified-gallery")&&((t=document.createElement("div")).className="img-alt is-center",t.textContent=o,n.insertBefore(t,e.nextSibling))})),r(),window.scrollCollect&&window.scrollCollect(),(p=document.querySelectorAll("#content-inner .fj-gallery")).length&&function(e){let t=e=>{let t="",n=e=>e.replace(/"/g,"&quot;");return e.forEach((e=>{var o=e.alt?`alt="${n(e.alt)}"`:"",i=e.title?`title="${n(e.title)}"`:"",a=`\n        <div class="fj-gallery-item">\n          ${(a=e.address||"")?`<div class="tag-address">${a}</div>`:""}\n          <img src="${e.url}" ${o+i}>\n        </div>\n      `;t+=a})),t},n=(e,n,o)=>{o=Number(o);var i=n.length;return o<i?e.insertAdjacentHTML("beforeend",t(n.splice(0,o))):(e.insertAdjacentHTML("beforeend",t(n)),e.classList.remove("lazyload")),window.lazyLoadInstance&&window.lazyLoadInstance.update(),o<i?o:i},o=(e,o)=>{let i=e.getAttribute("data-limit")??o.length;if(!e.classList.contains("lazyload")||o.length<i)e.innerHTML=t(o),e.nextElementSibling.style.display="none";else if(!e.classList.contains("btn_album_detail_lazyload")||e.classList.contains("page_img_lazyload")){n(e,o,i);let t=new IntersectionObserver(((a,l)=>{a.forEach((a=>{a.isIntersecting&&setTimeout((a=n(e,o,i),fjGallery(e,"appendImages",e.querySelectorAll(`.fj-gallery-item:nth-last-child(-n+${a})`)),anzhiyu.loadLightbox(e.querySelectorAll("img")),void(a<Number(i)&&t.unobserve(e.nextElementSibling))),100)}))}));t.observe(e.nextElementSibling)}else{n(e,o,i);let t=()=>{var a=n(e,o,i);fjGallery(e,"appendImages",e.querySelectorAll(`.fj-gallery-item:nth-last-child(-n+${a})`)),anzhiyu.loadLightbox(e.querySelectorAll("img")),a<i&&e.nextElementSibling.removeEventListener("click",t)};e.nextElementSibling.addEventListener("click",t)}anzhiyu.initJustifiedGallery(e),anzhiyu.loadLightbox(e.querySelectorAll("img")),window.lazyLoadInstance&&window.lazyLoadInstance.update()};var i=()=>{e.forEach((e=>{e.classList.contains("url")?(async e=>(await fetch(e)).json())(e.textContent).then((t=>{o(e,t)})):o(e,JSON.parse(e.textContent))}))};window.fjGallery?i():(getCSS(""+GLOBAL_CONFIG.source.justifiedGallery.css),getScript(""+GLOBAL_CONFIG.source.justifiedGallery.js).then(i))}(p),anzhiyu.loadLightbox(document.querySelectorAll("#article-container img:not(.no-lightbox)")),(d=document.querySelectorAll("#article-container table")).length&&d.forEach((e=>{e.closest(".highlight")||anzhiyu.wrap(e,"div",{class:"table-wrap"})})),(()=>{var e=document.querySelectorAll("#article-container .hide-button");if(e.length){let t=function(e){this.classList.add("open");var t=this.nextElementSibling.querySelectorAll(".gallery-container");t.length&&addJustifiedGallery(t)};e.forEach((e=>{e.addEventListener("click",t,{once:!0})}))}})(),u(),(()=>{var e=document.getElementById("switch-btn");if(e){let t=!1,n=document.getElementById("post-comment");anzhiyu.addEventListenerPjax(e,"click",(()=>{n.classList.toggle("move"),t||"function"!=typeof loadOtherComment||(t=!0,loadOtherComment())}))}})(),document.getElementById("toggle-menu").addEventListener("click",(()=>{a()})),document.getElementById("post-comment")){let j=1,M="",D=document.createElement("div"),H=(D.id="owo-big",document.querySelector("body"));function L(e){"IMG"==e.target.tagName&&j&&(j=0,M=setTimeout((()=>{var t=3*e.target.clientHeight,n=3*e.target.clientWidth;let o=e.x-e.offsetX-(n-e.target.clientWidth)/2;o+n>H.clientWidth&&(o-=o+n-H.clientWidth+10),o<0&&(o=10);var i=e.y-e.offsetY;D.style.height=t+"px",D.style.width=n+"px",D.style.left=o+"px",D.style.top=i+"px",D.style.display="flex",D.innerHTML=`<img src="${e.target.src}">`}),100))}function v(e){D.style.display="none",j=1,clearTimeout(M)}H.appendChild(D),new MutationObserver((e=>{e.forEach((e=>{var t=e.addedNodes;for(let e=0;e<t.length;e++){var n=t[e];n.nodeType===Node.ELEMENT_NODE&&n.classList.contains("OwO-body")&&!n.classList.contains("comment-barrage")&&(n.addEventListener("contextmenu",(e=>e.preventDefault())),n.addEventListener("mouseover",L),n.addEventListener("mouseout",v))}}))})).observe(document.getElementById("post-comment"),{childList:!0,subtree:!0})}(d=document.querySelector(".topGroup"))&&d.addEventListener("mouseleave",(function(){document.getElementById("todayCard").classList.remove("hide"),document.getElementById("todayCard").style.zIndex=1})),(async()=>{var e=document.querySelector(":root"),t=document.getElementById("post-top-bg")?.src;if(t){if(GLOBAL_CONFIG.mainTone)if(GLOBAL_CONFIG_SITE.postMainColor){let t=GLOBAL_CONFIG_SITE.postMainColor;"light"===h(t)&&(t=y(m(t),-40)),e.style.setProperty("--anzhiyu-bar-background",t),requestAnimationFrame((()=>{anzhiyu.initThemeColor()})),GLOBAL_CONFIG.mainTone.cover_change&&(document.documentElement.style.setProperty("--anzhiyu-main",t),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd"))}else{var n="var(--anzhiyu-theme)";let l="";"cdn"==GLOBAL_CONFIG.mainTone.mode||"both"==GLOBAL_CONFIG.mainTone.mode?l=t+"?imageAve":"api"==GLOBAL_CONFIG.mainTone.mode&&(l=GLOBAL_CONFIG.mainTone.api+t);try{var o=await fetch(l);if(o.ok&&o.headers.get("content-type")?.includes("application/json")){var i=await o.json();let t="cdn"==GLOBAL_CONFIG.mainTone.mode||"both"==GLOBAL_CONFIG.mainTone.mode?"#"+i.RGB.slice(2):i.RGB;"light"===h(t)&&(t=y(m(t),-40)),e.style.setProperty("--anzhiyu-bar-background",t),requestAnimationFrame((()=>{anzhiyu.initThemeColor()})),GLOBAL_CONFIG.mainTone.cover_change&&(document.documentElement.style.setProperty("--anzhiyu-main",t),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd"))}else if("both"==GLOBAL_CONFIG.mainTone.mode)try{var a=await fetch(GLOBAL_CONFIG.mainTone.api+t);if(a.ok&&a.headers.get("content-type")?.includes("application/json")){let t=(await a.json()).RGB;"light"===h(t)&&(t=y(m(t),-40)),e.style.setProperty("--anzhiyu-bar-background",t),requestAnimationFrame((()=>{anzhiyu.initThemeColor()})),GLOBAL_CONFIG.mainTone.cover_change&&(document.documentElement.style.setProperty("--anzhiyu-main",t),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd"))}else e.style.setProperty("--anzhiyu-bar-background",n),requestAnimationFrame((()=>{anzhiyu.initThemeColor()})),document.documentElement.style.setProperty("--anzhiyu-main",n)}catch{e.style.setProperty("--anzhiyu-bar-background",n),requestAnimationFrame((()=>{anzhiyu.initThemeColor()})),document.documentElement.style.setProperty("--anzhiyu-main",n)}else e.style.setProperty("--anzhiyu-bar-background",n),requestAnimationFrame((()=>{anzhiyu.initThemeColor()})),document.documentElement.style.setProperty("--anzhiyu-main",n)}catch(t){console.error("Error fetching data:",t),e.style.setProperty("--anzhiyu-bar-background",n),requestAnimationFrame((()=>{anzhiyu.initThemeColor()})),document.documentElement.style.setProperty("--anzhiyu-main",n)}}}else e.style.setProperty("--anzhiyu-bar-background","var(--anzhiyu-meta-theme-color)"),requestAnimationFrame((()=>{anzhiyu.initThemeColor()})),document.documentElement.style.setProperty("--anzhiyu-main",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-theme")),document.documentElement.style.setProperty("--anzhiyu-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"23"),document.documentElement.style.setProperty("--anzhiyu-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-main")+"dd")})(),(d=document.getElementById("toPageText"))&&d.addEventListener("keydown",(e=>{13===e.keyCode&&(anzhiyu.toPage(),e=document.getElementById("toPageButton").href,pjax.loadUrl(e))})),anzhiyu.addEventListenerPjax(document.getElementById("toggle-menu"),"click",(()=>{a()})),document.getElementById("page-name").innerText=document.title.split(" | "+GLOBAL_CONFIG_SITE.configTitle)[0],anzhiyu.initIndexEssay(),anzhiyu.changeTimeInEssay(),anzhiyu.removeBodyPaceClass(),anzhiyu.qrcodeCreate(),anzhiyu.changeTimeInAlbumDetail(),anzhiyu.reflashEssayWaterFall(),anzhiyu.sayhi(),anzhiyu.stopImgRightDrag(),anzhiyu.addNavBackgroundInit(),anzhiyu.setValueToBodyType(),anzhiyu.catalogActive(),anzhiyu.tagsPageActive(),anzhiyu.categoriesBarActive(),anzhiyu.topCategoriesBarScroll(),anzhiyu.switchRightClickMenuHotReview(),anzhiyu.getCustomPlayList(),anzhiyu.addEventListenerConsoleMusicList(!1),anzhiyu.initPaginationObserver(),setTimeout((()=>{var e;e=document.querySelectorAll("input, textarea"),Array.from(e).filter((e=>{"center-console"===e.id&&e.id})).forEach((e=>{e.addEventListener("focus",(()=>{anzhiyu_intype=!0})),e.addEventListener("blur",(()=>{anzhiyu_intype=!1}))})),"function"==typeof addFriendLinksInFooter&&addFriendLinksInFooter()}),200)},refreshFn(),window.addEventListener("resize",(()=>{i(!1),o&&anzhiyu.isHidden(document.getElementById("toggle-menu"))&&l()})),document.getElementById("menu-mask").addEventListener("click",(e=>{l()})),n=document.getElementById("rightMenu"),g("menu-darkmode"),g("sidebar",".darkmode_switchbutton"),document.querySelector("#sidebar-menus .menus_items")&&document.querySelector("#sidebar-menus .menus_items").addEventListener("click",(e=>{(e=e.target.closest(".site-page.group"))&&e.classList.toggle("hide")})),GLOBAL_CONFIG.islazyload&&(window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"})),void 0!==GLOBAL_CONFIG.copyright&&(()=>{let{limitCount:e,languages:t,copy:n,copyrightEbable:o}=GLOBAL_CONFIG.copyright;document.body.addEventListener("copy",(i=>{if(n&&anzhiyu.snackbarShow(t.copySuccess),o){i.preventDefault();var a=window.getSelection(0).toString();let n=a;return a.length>e&&(n=`${a}\n\n\n${t.author}\n${t.link}${window.location.href}\n${t.source}\n`+t.info),(i.clipboardData?i:window).clipboardData.setData("text",n)}}))})(),GLOBAL_CONFIG.navMusic){let e=setInterval((()=>{navMusicEl&&navMusicEl.querySelector("#nav-music meting-js").aplayer&&(clearInterval(e),navMusicEl.querySelector("#nav-music meting-js").aplayer.on("pause",(function(){navMusicEl.classList.remove("playing"),document.getElementById("menu-music-toggle").innerHTML='<i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span>',document.getElementById("nav-music-hoverTips").innerHTML="音乐已暂停",document.querySelector("#consoleMusic").classList.remove("on"),anzhiyu_musicPlaying=!1,navMusicEl.classList.remove("stretch")})),navMusicEl.querySelector("#nav-music meting-js").aplayer.on("play",(function(){navMusicEl.classList.add("playing"),document.getElementById("menu-music-toggle").innerHTML='<i class="anzhiyufont anzhiyu-icon-pause"></i><span>暂停音乐</span>',document.querySelector("#consoleMusic").classList.add("on"),anzhiyu_musicPlaying=!0})))}),16)}function p(e){var t=27===e.keyCode,n=e.shiftKey,o=anzhiyu_keyboard,i=anzhiyu_intype;t&&(anzhiyu.hideLoading(),anzhiyu.hideConsole(),rm)&&rm.hideRightMenu(),t=GLOBAL_CONFIG.shortcutKey.delay||100;let a=GLOBAL_CONFIG.shortcutKey.shiftDelay||200;o&&n&&!i&&(anzhiyu_keyUpShiftDelayEvent_timeoutId=setTimeout((()=>{switch(e.keyCode){case 16:anzhiyu_keyUpEvent_timeoutId=setTimeout((()=>{document.querySelector("#keyboard-tips").classList.add("show")}),a);break;case 65:anzhiyu.switchConsole();break;case 77:anzhiyu.musicToggle();break;case 75:anzhiyu.keyboardToggle();break;case 73:anzhiyu.rightMenuToggle();break;case 82:toRandomPost();break;case 72:pjax.loadUrl("/");break;case 68:c.darkmode();break;case 70:pjax.loadUrl("/fcircle/");break;case 76:pjax.loadUrl("/link/");break;case 80:pjax.loadUrl("/about/")}e.preventDefault()}),t))}function L(e){anzhiyu_keyUpEvent_timeoutId&&clearTimeout(anzhiyu_keyUpEvent_timeoutId),anzhiyu_keyUpShiftDelayEvent_timeoutId&&clearTimeout(anzhiyu_keyUpShiftDelayEvent_timeoutId),16===e.keyCode&&document.querySelector("#keyboard-tips").classList.remove("show")}if(GLOBAL_CONFIG.shortcutKey&&document.getElementById("consoleKeyboard")&&(localStorage.setItem("keyboardToggle","true"),document.getElementById("consoleKeyboard").classList.add("on"),anzhiyu_keyboard=!0,anzhiyu_keyboard=!!localStorage.getItem("keyboardToggle")&&localStorage.getItem("keyboardToggle"),window.onfocus=function(){document.getElementById("keyboard-tips").classList.remove("show")},(E=window).removeEventListener("keydown",p),E.removeEventListener("keyup",L),E.addEventListener("keydown",p),E.addEventListener("keyup",L)),GLOBAL_CONFIG.autoDarkmode&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{void 0===saveToLocal.get("theme")&&(e.matches?d("dark"):d("light"))})),GLOBAL_CONFIG.greetingBox){var v=GLOBAL_CONFIG.greetingBox.list,E=GLOBAL_CONFIG.greetingBox.default;let e=document.createElement("div"),t=(e.id="greeting",setTimeout((()=>{e.classList.add("shown")}),1e3),document.getElementById("greetingBox"));if(t){t.appendChild(e);var f=(new Date).getHours();let n=E;for(let e=0;e<v.length;e++)if(f>=v[e].startTime&&f<=v[e].endTime){n=v[e].greeting;break}e.innerHTML=n,setTimeout((()=>{e.classList.remove("shown"),setTimeout((()=>{t.remove()}),500)}),3e3)}}GLOBAL_CONFIG.LA51&&Promise.all([{url:"https://sdk.51.la/js-sdk-pro.min.js",charset:"UTF-8",crossorigin:!1,id:"LA_COLLECT"},{url:"https://sdk.51.la/perf/js-sdk-perf.min.js",crossorigin:"anonymous"}].map((({url:e,charset:t,crossorigin:n,id:o})=>{return[i,a="UTF-8",l,r]=[e,t,n,o],new Promise(((e,t)=>{let n=document.createElement("script");n.src=i,n.async=!0,r&&n.setAttribute("id",r),a&&n.setAttribute("charset",a),l&&n.setAttribute("crossorigin",l),n.onerror=t,n.onload=n.onreadystatechange=function(){var t=this.readyState;t&&"loaded"!==t&&"complete"!==t||(n.onload=n.onreadystatechange=null,e())},document.head.appendChild(n)}));var i,a,l,r}))).then((()=>{LA.init({id:GLOBAL_CONFIG.LA51.ck,ck:GLOBAL_CONFIG.LA51.ck}),(new LingQue.Monitor).init({id:GLOBAL_CONFIG.LA51.LingQueMonitorID,sendSuspicious:!0})})).catch((e=>{console.error("加载51a统计异常，本地加载403是正常情况:",e)}))}));