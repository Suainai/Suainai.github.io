let anzhiyu={debounce:(e,t=0,n=!1)=>{let o;return(...a)=>{var i=n&&!o;clearTimeout(o),o=setTimeout((()=>{o=null,n||e(...a)}),t),i&&e(...a)}},throttle:function(e,t,n={}){let o,a,i,s=0,l=()=>{s=!1===n.leading?0:(new Date).getTime(),o=null,e.apply(a,i),o||(a=i=null)};return(...c)=>{var r=(new Date).getTime(),u=(s||!1!==n.leading||(s=r),t-(r-s));a=this,i=c,u<=0||t<u?(o&&(clearTimeout(o),o=null),s=r,e.apply(a,i),o||(a=i=null)):o||!1===n.trailing||(o=setTimeout(l,u))}},sidebarPaddingR:()=>{var e=window.innerWidth,t=document.body.clientWidth;e!==t&&(document.body.style.paddingRight=e-t+"px")},snackbarShow:(e,t=!1,n=2e3,o=!1)=>{var{position:a,bgLight:i,bgDark:s}=GLOBAL_CONFIG.Snackbar,i="light"===document.documentElement.getAttribute("data-theme")?i:s;document.querySelector(":root").style.setProperty("--anzhiyu-snackbar-time",n+"ms"),Snackbar.show({text:e,backgroundColor:i,onActionClick:t,actionText:o,showAction:o,duration:n,pos:a,customClass:"snackbar-css"})},loadComment:(e,t)=>{if("IntersectionObserver"in window){let n=new IntersectionObserver((e=>{e[0].isIntersecting&&(t(),n.disconnect())}),{threshold:[0]});n.observe(e)}else t()},scrollToDest:(e,t=500)=>{let n=window.pageYOffset;if("scrollBehavior"in document.documentElement.style)window.scrollTo({top:e,behavior:"smooth"});else{let o=null;e=+e,window.requestAnimationFrame((function a(i){i-=o=o||i,n<e?window.scrollTo(0,(e-n)*i/t+n):window.scrollTo(0,n-(n-e)*i/t),i<t?window.requestAnimationFrame(a):window.scrollTo(0,e)}))}},initJustifiedGallery:function(e){let t=e=>{anzhiyu.isHidden(e)||fjGallery(e,{itemSelector:".fj-gallery-item",rowHeight:e.getAttribute("data-rowHeight"),gutter:4,onJustify:function(){this.$container.style.opacity="1"}})};0===Array.from(e).length?t(e):e.forEach((e=>{t(e)}))},animateIn:(e,t)=>{e.style.display="block",e.style.animation=t},animateOut:(e,t)=>{e.addEventListener("animationend",(function t(){e.style.display="",e.style.animation="",e.removeEventListener("animationend",t)})),e.style.animation=t},wrap:(e,t,n)=>{var o,a,i=document.createElement(t);for([o,a]of Object.entries(n))i.setAttribute(o,a);e.parentNode.insertBefore(i,e),i.appendChild(e)},isHidden:e=>0===e.offsetHeight&&0===e.offsetWidth,getEleTop:e=>{let t=e.offsetTop,n=e.offsetParent;for(;null!==n;)t+=n.offsetTop,n=n.offsetParent;return t},loadLightbox:e=>{var t=GLOBAL_CONFIG.lightbox;if("mediumZoom"===t){let t=mediumZoom(e);t.on("open",(e=>{var n="dark"===document.documentElement.getAttribute("data-theme")?"#121212":"#fff";t.update({background:n})}))}"fancybox"===t&&(Array.from(e).forEach((e=>{var t,n;"A"!==e.parentNode.tagName&&(t=e.dataset.lazySrc||e.src,n=e.title||e.alt||"",anzhiyu.wrap(e,"a",{href:t,"data-fancybox":"gallery","data-caption":n,"data-thumb":t}))})),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{autoStart:!1}}),window.fancyboxRun=!0))},setLoading:{add:e=>{e.insertAdjacentHTML("afterend",'\n        <div class="loading-container">\n          <div class="loading-item">\n            <div></div><div></div><div></div><div></div><div></div>\n          </div>\n        </div>\n      ')},remove:e=>{e.nextElementSibling.remove()}},updateAnchor:e=>{var t;e!==window.location.hash&&(e=e||location.pathname,t=GLOBAL_CONFIG_SITE.title,window.history.replaceState({url:location.href,title:t},t,e))},getScrollPercent:(e,t)=>{var n,o=t.clientHeight;o=(n=document.documentElement.clientHeight)<o?o-n:document.documentElement.scrollHeight-n;return 100<(n=Math.round((e-t.offsetTop)/o*100))?100:n<=0?0:n},addGlobalFn:(e,t,n=!1,o=window)=>{var a=o.globalFn||{},i=a[e]||{};n&&i[n]||(i[n=n||Object.keys(i).length]=t,a[e]=i,o.globalFn=a)},addEventListenerPjax:(e,t,n,o=!1)=>{e.addEventListener(t,n,o),anzhiyu.addGlobalFn("pjax",(()=>{e.removeEventListener(t,n,o)}))},removeGlobalFnEvent:(e,t=window)=>{var{globalFn:n={}}=t;let o=n[e]||{};(n=Object.keys(o)).length&&(n.forEach((e=>{o[e]()})),delete t.globalFn[e])},changeThemeMetaColor:function(e){null!==themeColorMeta&&themeColorMeta.setAttribute("content",e)},initThemeColor:function(){let e=getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-bar-background").trim().replace('"',"").replace('"',"");26<(window.scrollY||document.documentElement.scrollTop)&&anzhiyu.is_Post()&&(e=getComputedStyle(document.documentElement).getPropertyValue("--anzhiyu-meta-theme-post-color").trim().replace('"',"").replace('"',"")),themeColorMeta.getAttribute("content")!==e&&this.changeThemeMetaColor(e)},is_Post:function(){return 0<=window.location.href.indexOf("/posts/")},addNavBackgroundInit:function(){var e=0,t=0;0!=(0<(e=$bodyWrap?$bodyWrap.scrollTop:e)-(t=document.documentElement?document.documentElement.scrollTop:t)?e:t)&&(pageHeaderEl.classList.add("nav-fixed"),pageHeaderEl.classList.add("nav-visible"))},downloadImage:function(e,t){rm.hideRightMenu(),0==rm.downloadimging?(rm.downloadimging=!0,anzhiyu.snackbarShow("正在下载中，请稍后",!1,1e4),setTimeout((function(){let n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){(e=document.createElement("canvas")).width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0,n.width,n.height);var e=e.toDataURL("image/png"),o=document.createElement("a"),a=new MouseEvent("click");o.download=t||"photo",o.href=e,o.dispatchEvent(a)},n.src=e,anzhiyu.snackbarShow("图片已添加盲水印，请遵守版权协议"),rm.downloadimging=!1}),"10000")):anzhiyu.snackbarShow("有正在进行中的下载，请稍后再试")},stopImgRightDrag:function(){for(var e=document.getElementsByTagName("img"),t=0;t<e.length;t++)e[t].addEventListener("dragstart",(function(){return!1}))},scrollTo:function(e){e=document.querySelector(e).offsetTop,window.scrollTo(0,e-80)},hideAsideBtn:()=>{var e=document.documentElement.classList;e.contains("hide-aside")?saveToLocal.set("aside-status","show",2):saveToLocal.set("aside-status","hide",2),e.toggle("hide-aside"),e.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.add("on"):document.querySelector("#consoleHideAside").classList.remove("on")},switchCommentBarrage:function(){var e=document.querySelector(".comment-barrage");e&&("flex"===window.getComputedStyle(e).display?(e.style.display="none",anzhiyu.snackbarShow("✨ 已关闭评论弹幕"),document.querySelector(".menu-commentBarrage-text").textContent="显示热评",document.querySelector("#consoleCommentBarrage").classList.remove("on"),localStorage.setItem("commentBarrageSwitch","false")):(e.style.display="flex",document.querySelector(".menu-commentBarrage-text").textContent="关闭热评",document.querySelector("#consoleCommentBarrage").classList.add("on"),anzhiyu.snackbarShow("✨ 已开启评论弹幕"),localStorage.removeItem("commentBarrageSwitch"))),rm&&rm.hideRightMenu()},initPaginationObserver:()=>{var e=document.getElementById("post-comment");let t=document.getElementById("pagination");e&&t&&new IntersectionObserver((e=>{let n=document.querySelector(".comment-barrage");e.forEach((e=>{e.isIntersecting?(t.classList.add("show-window"),n&&(n.style.bottom="-200px")):(t.classList.remove("show-window"),n&&(n.style.bottom="0px"))}))})).observe(e)},initIndexEssay:function(){document.getElementById("bbTimeList")&&setTimeout((()=>{let e=new Swiper(".essay_bar_swiper_container",{passiveListeners:!0,direction:"vertical",loop:!0,autoplay:{disableOnInteraction:!0,delay:3e3},mousewheel:!0});var t=document.getElementById("bbtalk");null!==t&&(t.onmouseenter=function(){e.autoplay.stop()},t.onmouseleave=function(){e.autoplay.start()})}),100)},scrollByMouseWheel:function(e,t){e.addEventListener("mousewheel",(function(t){e.scrollLeft-=t.wheelDelta/2,t.preventDefault()}),{passive:!1}),t&&(t.classList.add("selected"),e.scrollLeft=t.offsetLeft-e.offsetLeft-(e.offsetWidth-t.offsetWidth)/2)},catalogActive:function(){var e=document.getElementById("catalog-list");if(e){let n=decodeURIComponent(window.location.pathname);var t=e.querySelectorAll(".catalog-list-item");let o=null;t.forEach((e=>{n.startsWith(e.id)&&(o=e)})),anzhiyu.scrollByMouseWheel(e,o)}},tagsPageActive:function(){var e,t=document.getElementById("tag-page-tags");t&&(e=document.getElementById(decodeURIComponent(window.location.pathname)),anzhiyu.scrollByMouseWheel(t,e))},diffDate:function(e,t=!1,n=!1){var o,a,i=new Date,s=(e=new Date(e),i=i.getTime()-e.getTime(),864e5);return t?(t=i/s,o=i/36e5,a=i/6e4,1<=i/2592e6?e.toLocaleDateString().replace(/\//g,"-"):1<=t?parseInt(t)+" "+GLOBAL_CONFIG.date_suffix.day:1<=o?parseInt(o)+" "+GLOBAL_CONFIG.date_suffix.hour:1<=a?parseInt(a)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just):n?(t=i/s,o=i/36e5,a=i/6e4,1<=i/2592e6?e.toLocaleDateString().replace(/\//g,"-"):1<=t&&t<=3?parseInt(t)+" "+GLOBAL_CONFIG.date_suffix.day:3<t?e.getMonth()+1+"/"+e.getDate():1<=o?parseInt(o)+" "+GLOBAL_CONFIG.date_suffix.hour:1<=a?parseInt(a)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just):parseInt(i/s)},changeTimeInEssay:function(){document.querySelector("#bber")&&document.querySelectorAll("#bber time").forEach((function(e){var t=e.getAttribute("datetime");e.innerText=anzhiyu.diffDate(t,!0),e.style.display="inline"}))},changeTimeInAlbumDetail:function(){document.querySelector("#album_detail")&&document.querySelectorAll("#album_detail time").forEach((function(e){var t=e.getAttribute("datetime");e.innerText=anzhiyu.diffDate(t,!0),e.style.display="inline"}))},reflashEssayWaterFall:function(){let e=document.getElementById("waterfall");e&&setTimeout((function(){waterfall(e),e.classList.add("show")}),800)},sayhi:function(){var e=document.getElementById("author-info__sayhi");e&&(e.innerHTML=(()=>{var e=(new Date).getHours();let t="";return 0<=e&&e<=5?t="睡个好觉，保证精力充沛":5<e&&e<=10?t="一日之计在于晨":10<e&&e<=14?t="吃饱了才有力气干活":14<e&&e<=18?t="集中精力，攻克难关":18<e&&e<=24&&(t="不要太劳累了，早睡更健康"),t})())},addFriendLink(){var e,t=document.getElementsByClassName("el-textarea__inner")[0];t&&(e=new Event("input",{cancelable:!0,bubbles:!0}),t.value=this.getConfigIfPresent(GLOBAL_CONFIG.linkPageTop,"addFriendPlaceholder","昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"),t.dispatchEvent(e),t.focus(),t.setSelectionRange(-1,-1))},getConfigIfPresent:function(e,t,n){return e&&e.hasOwnProperty(t)&&e[t]||n},musicToggle:function(e=!0){anzhiyu_musicFirst||(anzhiyu.musicBindEvent(),anzhiyu_musicFirst=!0),anzhiyu_musicPlaying?(navMusicEl.classList.remove("playing"),document.getElementById("menu-music-toggle").innerHTML='<i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span>',document.getElementById("nav-music-hoverTips").innerHTML="音乐已暂停",document.querySelector("#consoleMusic").classList.remove("on"),anzhiyu_musicPlaying=!1,navMusicEl.classList.remove("stretch")):(navMusicEl.classList.add("playing"),document.getElementById("menu-music-toggle").innerHTML='<i class="anzhiyufont anzhiyu-icon-pause"></i><span>暂停音乐</span>',document.querySelector("#consoleMusic").classList.add("on"),anzhiyu_musicPlaying=!0,navMusicEl.classList.add("stretch")),e&&document.querySelector("#nav-music meting-js").aplayer.toggle(),rm&&rm.hideRightMenu()},musicTelescopic:function(){navMusicEl.classList.contains("stretch")?navMusicEl.classList.remove("stretch"):navMusicEl.classList.add("stretch")},musicSkipBack:function(){navMusicEl.querySelector("meting-js").aplayer.skipBack(),rm&&rm.hideRightMenu()},musicSkipForward:function(){navMusicEl.querySelector("meting-js").aplayer.skipForward(),rm&&rm.hideRightMenu()},musicGetName:function(){for(var e=document.querySelectorAll(".aplayer-title"),t=[],n=e.length-1;0<=n;n--)t[n]=e[n].innerText;return t[0]},initConsoleState:function(){document.documentElement.classList.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.add("on"):document.querySelector("#consoleHideAside").classList.remove("on")},rewardShowConsole:function(){consoleEl.classList.add("reward-show"),anzhiyu.initConsoleState()},showConsole:function(){consoleEl.classList.add("show"),anzhiyu.initConsoleState()},hideConsole:function(){consoleEl.classList.contains("show")?consoleEl.classList.remove("show"):consoleEl.classList.contains("reward-show")&&consoleEl.classList.remove("reward-show");var e=document.getElementById("center-console");e.checked&&(e.checked=!1)},hideLoading:function(){document.getElementById("loading-box").classList.add("loaded")},cacheAndPlayMusic(){if(e=localStorage.getItem("musicData")){var e=JSON.parse(e);if((new Date).getTime()-e.timestamp<864e5)return void anzhiyu.playMusic(e.songs)}fetch("/json/music.json").then((e=>e.json())).then((e=>{var t={timestamp:(new Date).getTime(),songs:e};localStorage.setItem("musicData",JSON.stringify(t)),anzhiyu.playMusic(e)}))},playMusic(e){var t=document.getElementById("anMusic-page").querySelector("meting-js").aplayer;let n=e[Math.floor(Math.random()*e.length)];var o,a=t.list.audios;if(selectRandomSong.includes(n.name)){let s=!1;for(;!s;){var i=e[Math.floor(Math.random()*e.length)];if(selectRandomSong.includes(i.name)||(t.list.add([i]),t.list.switch(a.length),selectRandomSong.push(i.name),s=!0),selectRandomSong.length===e.length)break}s||-1!=(o=a.findIndex((e=>e.name===n.name)))&&t.list.switch(o)}else t.list.add([n]),t.list.switch(a.length),selectRandomSong.push(n.name);console.info("已随机歌曲：",selectRandomSong,"本次随机歌曲：",n.name)},changeMusicBg:function(e=!0){var t=document.getElementById("an_music_bg");if(e)e=document.querySelector("#anMusic-page .aplayer-pic"),t.style.backgroundImage=e.style.backgroundImage;else{let e=setInterval((()=>{document.querySelector("#anMusic-page .aplayer-pic")&&(clearInterval(e),anzhiyu.addEventListenerMusic(),anzhiyu.changeMusicBg(),document.querySelector("#nav-music meting-js").aplayer)&&!document.querySelector("#nav-music meting-js").aplayer.audio.paused&&anzhiyu.musicToggle()}),100)}},getCustomPlayList:function(){var e,t,n;window.location.pathname.startsWith("/music/")&&(n=new URLSearchParams(window.location.search),e=document.getElementById("anMusic-page-meting"),n.get("id")&&n.get("server")?(t=n.get("id"),n=n.get("server"),e.innerHTML=`<meting-js id="${t}" server=${n} type="playlist" type="playlist" mutex="true" preload="auto" theme="var(--anzhiyu-main)" order="list" list-max-height="calc(100vh - 169px)!important"></meting-js>`):e.innerHTML='<meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="auto" theme="var(--anzhiyu-main)" order="list" list-max-height="calc(100vh - 169px)!important"></meting-js>',anzhiyu.changeMusicBg(!1))},hideTodayCard:function(){document.getElementById("todayCard")&&(document.getElementById("todayCard").classList.add("hide"),document.querySelector(".topGroup").querySelectorAll(".recent-post-item").forEach((e=>{e.style.display="flex"})))},addEventListenerMusic:function(){let e=document.getElementById("anMusic-page");var t=e.querySelector(".aplayer-info .aplayer-time .aplayer-icon-menu"),n=e.querySelector("#anMusicBtnGetSong"),o=e.querySelector("#anMusicRefreshBtn"),a=e.querySelector("#anMusicSwitching");let i=e.querySelector("meting-js").aplayer;i.volume(.8,!0),i.on("loadeddata",(function(){anzhiyu.changeMusicBg()})),t.addEventListener("click",(function(){document.getElementById("menu-mask").style.display="block",document.getElementById("menu-mask").style.animation="0.5s ease 0s 1 normal none running to_show",e.querySelector(".aplayer.aplayer-withlist .aplayer-list").style.opacity="1"})),document.getElementById("menu-mask").addEventListener("click",(function t(){"/music/"!=window.location.pathname?document.getElementById("menu-mask").removeEventListener("click",t):e.querySelector(".aplayer-list").classList.remove("aplayer-list-hide")})),n.addEventListener("click",(()=>{var e,t;changeMusicListFlag?(t=(e=document.getElementById("anMusic-page").querySelector("meting-js").aplayer).list.audios,t=Math.floor(Math.random()*t.length),e.list.switch(t)):anzhiyu.cacheAndPlayMusic()})),o.addEventListener("click",(()=>{localStorage.removeItem("musicData"),anzhiyu.snackbarShow("已移除相关缓存歌曲")})),a.addEventListener("click",(()=>{anzhiyu.changeMusicList()})),"custom"===GLOBAL_CONFIG.music_page_default&&anzhiyu.changeMusicList(),document.addEventListener("keydown",(function(e){"Space"===e.code&&(e.preventDefault(),i.toggle()),39===e.keyCode&&(e.preventDefault(),i.skipForward()),37===e.keyCode&&(e.preventDefault(),i.skipBack()),38===e.keyCode&&musicVolume<=1&&(musicVolume+=.1,i.volume(musicVolume,!0)),40===e.keyCode&&0<=musicVolume&&(musicVolume+=-.1,i.volume(musicVolume,!0))}))},changeMusicList:async function(){var e,t=document.getElementById("anMusic-page").querySelector("meting-js").aplayer,n=(new Date).getTime(),o=JSON.parse(localStorage.getItem("musicData"))||{timestamp:0};let a=[];changeMusicListFlag?a=defaultPlayMusicList:(defaultPlayMusicList=t.list.audios,n-o.timestamp<864e5?a=o.songs:(e=await fetch("/json/music.json"),a=await e.json(),o.timestamp=n,o.songs=a,localStorage.setItem("musicData",JSON.stringify(o)))),t.list.clear(),t.list.add(a),changeMusicListFlag=!changeMusicListFlag},addEventListenerConsoleMusicList:function(){let e=document.getElementById("nav-music");e&&e.addEventListener("click",(t=>{var n=e.querySelector(".aplayer-list"),o=e.querySelector("div.aplayer-info > div.aplayer-controller > div.aplayer-time.aplayer-time-narrow > button.aplayer-icon.aplayer-icon-menu svg");t.target!=o&&n.classList.contains("aplayer-list-hide")&&n.classList.remove("aplayer-list-hide")}))},toPage:function(){var e=document.getElementById("toPageText"),t=document.getElementById("toPageButton"),n=document.querySelectorAll(".page-number");n=Number(n[n.length-1].innerHTML),e=Number(e.value);!isNaN(e)&&1<=e&&Number.isInteger(e)?t.href=1===e?"/":"/page/"+(n<e?n:e)+"/":t.href="javascript:void(0);"},removeBodyPaceClass:function(){document.body.className="pace-done"},setValueToBodyType:function(){var e=document.getElementById("page-type").value;document.body.dataset.type=e},addRandomCommentInfo:function(){let e=""+adjectives[Math.floor(Math.random()*adjectives.length)]+vegetablesAndFruits[Math.floor(Math.random()*vegetablesAndFruits.length)];for(var t=["#author","input[name='comname']","#inpName","input[name='author']","#ds-dialog-name","#name","input[name='nick']","#comment_author"],n=["#mail","#email","input[name='commail']","#inpEmail","input[name='email']","#ds-dialog-email","input[name='mail']","#comment_email"],o=0;o<t.length;o++){var a=document.querySelector(t[o]);if(null!=a){a.value=e,a.dispatchEvent(new Event("input")),a.dispatchEvent(new Event("change"));break}}for(var i=0;i<n.length;i++){var s=document.querySelector(n[i]);if(null!=s){s.value=visitorMail,s.dispatchEvent(new Event("input")),s.dispatchEvent(new Event("change"));break}}var l=document.getElementsByClassName("el-textarea__inner")[0];l.focus(),l.setSelectionRange(-1,-1)},totraveling:function(){anzhiyu.snackbarShow("即将跳转到「开往」项目的成员博客，不保证跳转网站的安全性和可用性",(e=>{e.style.opacity=0,travellingsTimer&&clearTimeout(travellingsTimer)}),5e3,"取消"),travellingsTimer=setTimeout((function(){window.open("https://www.travellings.cn/go.html","_blank")}),"5000")},replaceAll:function(e,t,n){return e.split(t).join(n)},musicBindEvent:function(){document.querySelector("#nav-music .aplayer-music").addEventListener("click",(function(){anzhiyu.musicTelescopic()})),document.querySelector("#nav-music .aplayer-button").addEventListener("click",(function(){anzhiyu.musicToggle(!1)}))},hasMobile:function(){let e=!1;return!!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)||document.body.clientWidth<800)||e},qrcodeCreate:function(){document.getElementById("qrcode")&&(document.getElementById("qrcode").innerHTML="",new QRCode(document.getElementById("qrcode"),{text:window.location.href,width:250,height:250,colorDark:"#000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}))},isInViewPortOfOne:function(e){var t;if(e)return t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e.offsetTop-document.documentElement.scrollTop<=t},addRewardMask:function(){document.querySelector(".reward-main")&&(document.querySelector(".reward-main").style.display="flex",document.querySelector(".reward-main").style.zIndex="102",document.getElementById("quit-box").style.display="flex")},removeRewardMask:function(){document.querySelector(".reward-main")&&(document.querySelector(".reward-main").style.display="none",document.getElementById("quit-box").style.display="none")},keyboardToggle:function(){var e=anzhiyu_keyboard;anzhiyu_keyboard=e?(document.querySelector("#consoleKeyboard").classList.remove("on"),!1):(document.querySelector("#consoleKeyboard").classList.add("on"),!0),localStorage.setItem("keyboardToggle",e?"false":"true")},rightMenuToggle:function(){window.oncontextmenu?window.oncontextmenu=null:!window.oncontextmenu&&oncontextmenuFunction&&(window.oncontextmenu=oncontextmenuFunction)},switchConsole:()=>{var e=document.getElementById("console");(e=(document.documentElement.classList.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.add("on"):document.querySelector("#consoleHideAside").classList.remove("on"),e.classList.contains("show")?e.classList.remove("show"):e.classList.add("show"),document.querySelector("#consoleKeyboard")))&&(anzhiyu_keyboard="true"===localStorage.getItem("keyboardToggle")?(e.classList.add("on"),!0):(e.classList.remove("on"),!1))},intersectionObserver:function(e,t){let n;return()=>(n?n.disconnect():n=new IntersectionObserver((n=>{n.forEach((n=>{(0<n.intersectionRatio?e:t)?.()}))})),n)},scrollCategoryBarToRight:function(){var e,t=document.getElementById("catalog-list"),n=document.getElementById("category-bar-next");t&&n?(e=t.clientWidth,t.scrollLeft+t.clientWidth+1>=t.scrollWidth?(t.scroll({left:0,behavior:"smooth"}),n.innerHTML='<i class="anzhiyufont anzhiyu-icon-angle-double-right"></i>'):t.scrollBy({left:e,behavior:"smooth"})):console.error("Element(s) not found: 'catalog-list' and/or 'category-bar-next'.")},categoriesBarActive:function(){var e=decodeURIComponent(window.location.pathname),t=document.getElementById("category-bar");t&&("/"===e?t.querySelector("#首页").classList.add("select"):/\/categories\/.*?\//.test(e)&&(e=e.split("/")[2],t.querySelector("#"+e).classList.add("select")))},topCategoriesBarScroll:function(){var e=document.getElementById("category-bar-items");e&&e.addEventListener("mousewheel",(function(e){var t=-e.wheelDelta/2;this.scrollLeft+=t,e.preventDefault()}))},switchRightClickMenuHotReview:function(){var e=document.getElementById("post-comment");document.getElementById("menu-commentBarrage").style.display=e?"flex":"none"},changeSayHelloText:function(){var e=GLOBAL_CONFIG.authorStatus.skills,t=document.getElementById("author-info__sayhi");if(1===e.length)t.textContent=e[0];else{var n=t.textContent;let o=n;for(;o===n;)o=e[Math.floor(Math.random()*e.length)];t.textContent=o}}},anzhiyuPopupManager={queue:[],processing:!1,Jump:!1,enqueuePopup(e,t,n,o=3e3){this.queue.push({title:e,tip:t,url:n,duration:o}),this.processing||this.processQueue()},processQueue(){var e,t,n,o;0<this.queue.length&&!this.processing&&(this.processing=!0,({title:e,tip:t,url:n,duration:o}=this.queue.shift()),this.popupShow(e,t,n,o))},popupShow(e,t,n,o){let a=document.getElementById("popup-window");if(a){let i=a.querySelector(".popup-window-title"),s=a.querySelector(".popup-window-content").querySelector(".popup-tip");a.classList.contains("show-popup-window")&&a.classList.add("popup-hide"),setTimeout((()=>{a.removeEventListener("click",this.clickEventHandler),n?(window.pjax?this.clickEventHandler=e=>{e.preventDefault(),pjax.loadUrl(n),a.classList.remove("show-popup-window"),a.classList.remove("popup-hide"),this.Jump=!0,this.processing=!1,this.processQueue()}:this.clickEventHandler=()=>{window.location.href=n},a.addEventListener("click",this.clickEventHandler),a.classList.contains("no-url")&&a.classList.remove("no-url")):(a.classList.contains("no-url")||a.classList.add("no-url"),this.clickEventHandler=()=>{a.classList.add("popup-hide"),setTimeout((()=>{a.classList.remove("popup-hide"),a.classList.remove("show-popup-window")}),1e3)},a.addEventListener("click",this.clickEventHandler)),a.classList.contains("popup-hide")&&a.classList.remove("popup-hide"),a.classList.add("show-popup-window"),i.textContent=e,s.textContent=t}),800),setTimeout((()=>{n&&!this.Jump&&(this.Jump=!1),a.classList.contains("popup-hide")||""==a.className||a.classList.add("popup-hide"),this.processing=!1,this.processQueue()}),o)}}};